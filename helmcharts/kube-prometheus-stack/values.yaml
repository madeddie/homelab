kube-prometheus-stack:
  alertmanager:
    ingress:
      enabled: true
      ingressClassName: traefik
      annotations:
        traefik.ingress.kubernetes.io/router.middlewares: traefik-ipallowlan@kubernetescrd
        traefik.ingress.kubernetes.io/router.entrypoints: web
      hosts:
        - alertmanager.svc.madtech.cx

  grafana:
    admin:
      existingSecret: grafana-admin-secret
    ingress:
      enabled: true
      ingressClassName: traefik
      annotations:
        traefik.ingress.kubernetes.io/router.middlewares: traefik-ipallowlan@kubernetescrd
        traefik.ingress.kubernetes.io/router.entrypoints: web
      hosts:
        - grafana.svc.madtech.cx
    dashboards:
      default:
        CloudNativePG:
          gnetId: 20417
          revision: 4
          datasource: Prometheus
  prometheus:
    ingress:
      enabled: true
      ingressClassName: traefik
      annotations:
        traefik.ingress.kubernetes.io/router.middlewares: traefik-ipallowlan@kubernetescrd
        traefik.ingress.kubernetes.io/router.entrypoints: web
      hosts:
        - prom.svc.madtech.cx
        - prometheus.svc.madtech.cx
